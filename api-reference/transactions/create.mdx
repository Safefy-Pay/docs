---
title: "Criar transação"
description: "Crie uma transação PIX ou boleto"
openapi: "/api-reference/openapi.json POST /v1/transactions"
---

Cria uma transação PIX ou boleto.

- **PIX**: Apenas `method` e `amount` são obrigatórios. Retorna o código **Copia e Cola** para pagamento.
- **Boleto**: Requer `method`, `amount` e um cliente vinculado (`customerId` **ou** `customerName`). Retorna código de barras, linha digitável e URL do PDF.

<Info>
A imagem do QR Code **não é retornada** pela API. Você deve gerar a imagem no seu frontend usando uma biblioteca de QR Code a partir do campo `copyAndPaste`.
</Info>

## Campos obrigatórios por método

| Campo | PIX | Boleto |
|-------|-----|--------|
| `method` | Obrigatório | Obrigatório |
| `amount` | Obrigatório | Obrigatório |
| `customerId` | Opcional | Opcional (se enviar `customerName`) |
| `customerName` | Opcional | **Obrigatório** (se não enviar `customerId`) |
| `description` | Opcional | Opcional |
| `boletoDueDate` | N/A | Opcional (padrão: 3 dias) |
| `callbackUrl` | Opcional | Opcional |

<Tip>
Se você já tem um cliente cadastrado, envie `customerId`. Se não tiver, envie `customerName` (e opcionalmente `customerDocument` e `customerEmail`) e a Safefy cuidará da vinculação.
</Tip>

## Valores gerados automaticamente

Alguns campos opcionais são preenchidos automaticamente quando não informados. Isso acontece porque as instituições financeiras exigem esses dados para processar o pagamento, mas a Safefy gera valores válidos para simplificar sua integração.

### PIX

| Campo | O que acontece se não for enviado |
|-------|--------------------------------------|
| Nome do pagador | Preenchido como "Pagador" |
| CPF do pagador | Um CPF válido e aleatório é gerado automaticamente |

<Tip>
Se você enviar um `customerId` com nome e documento cadastrados, esses dados serão utilizados no lugar dos valores automáticos.
</Tip>

### Boleto

| Campo | O que acontece se não for enviado |
|-------|--------------------------------------|
| `boletoDueDate` | O vencimento é definido para **3 dias** após a criação |
| CPF do cliente | Se o cliente não tiver documento cadastrado, um CPF válido e aleatório é gerado |
| Endereço do cliente | Se o cliente não tiver endereço completo, um endereço brasileiro válido é gerado |

<Info>
Os valores gerados automaticamente (CPF e endereço) são tecnicamente válidos e servem apenas para que a instituição financeira aceite a transação. Eles não representam dados reais de nenhuma pessoa. Para garantir que os dados corretos apareçam no boleto, cadastre o cliente com todas as informações antes de criar a transação.
</Info>

## Gerando o QR Code

O campo `pix.copyAndPaste` contém o código EMV (BR Code) do PIX. Para exibir o QR Code visualmente, você precisa gerar a imagem no seu frontend.

### JavaScript (usando qrcode.js)

```html
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<canvas id="qrcode"></canvas>

<script>
  const pixCode = "00020126580014br.gov.bcb.pix0136a1b2c3d4...";
  QRCode.toCanvas(document.getElementById('qrcode'), pixCode);
</script>
```

### React (usando react-qr-code)

```jsx
import QRCode from 'react-qr-code';

function PaymentPage({ transaction }) {
  return (
    <div>
      <QRCode value={transaction.pix.copyAndPaste} size={256} />
      <p>Ou copie o código:</p>
      <code>{transaction.pix.copyAndPaste}</code>
    </div>
  );
}
```

### Next.js (usando next-qrcode)

```jsx
import { useQRCode } from 'next-qrcode';

function PaymentPage({ transaction }) {
  const { Canvas } = useQRCode();
  
  return (
    <Canvas
      text={transaction.pix.copyAndPaste}
      options={{ width: 256, margin: 2 }}
    />
  );
}
```

<Tip>
O código `copyAndPaste` também pode ser copiado pelo usuário e colado diretamente no app do banco para efetuar o pagamento.
</Tip>

## Dados do boleto

Quando `method` for `boleto`, a resposta inclui:

- `boleto.barcode`
- `boleto.digitableLine`
- `boleto.pdfUrl`
- `boleto.dueDate`
