---
title: "Criar transação"
description: "Crie uma transação PIX ou boleto"
openapi: "/api-reference/openapi.json POST /v1/transactions"
---

Cria uma transação PIX ou boleto.

- **PIX**: Apenas `method` e `amount` são obrigatórios. Retorna o código **Copia e Cola** para pagamento.
- **Boleto**: Requer `method`, `amount` e `customerId` (cliente com nome e email cadastrados). Retorna código de barras, linha digitável e URL do PDF.

<Info>
A imagem do QR Code **não é retornada** pela API. Você deve gerar a imagem no seu frontend usando uma biblioteca de QR Code a partir do campo `copyAndPaste`.
</Info>

## Parâmetros

<ParamField body="method" type="string" required>
  Método de pagamento: `pix` ou `boleto`.
</ParamField>

<ParamField body="amount" type="integer" required>
  Valor da transação em centavos. Exemplo: R$ 150,00 = `15000`.
</ParamField>

<ParamField body="currency" type="string">
  Moeda. Padrão: `BRL`.
</ParamField>

<ParamField body="description" type="string">
  Descrição da transação. Aparece no extrato do pagador.
</ParamField>

<ParamField body="externalId" type="string">
  Identificador externo no seu sistema (ex: ID do pedido). Máximo 100 caracteres.
</ParamField>

<ParamField body="customerId" type="string">
  ID do cliente associado à transação (UUID). **Obrigatório para boleto.** O cliente deve ter `name` e `email` cadastrados.
</ParamField>

<ParamField body="pixExpirationMinutes" type="integer">
  Tempo de expiração em minutos (apenas PIX). Padrão: 30 minutos.
</ParamField>

<ParamField body="boletoDueDate" type="string">
  Data de vencimento do boleto (formato `YYYY-MM-DD`). Opcional — se não informado, o vencimento será em 3 dias.
</ParamField>

<ParamField body="boletoInstructions" type="string">
  Instruções do boleto. Opcional.
</ParamField>

<ParamField body="callbackUrl" type="string">
  URL para receber webhooks sempre que o status do pagamento mudar. Veja [Webhooks de transação](/api-reference/transactions/webhooks).
</ParamField>

<ParamField body="metadata" type="string">
  Dados adicionais em formato JSON string. Máximo 1000 caracteres.
</ParamField>

## Campos obrigatórios por método

| Campo | PIX | Boleto |
|-------|-----|--------|
| `method` | Obrigatório | Obrigatório |
| `amount` | Obrigatório | Obrigatório |
| `customerId` | Opcional | **Obrigatório** |
| `description` | Opcional | Opcional |
| `boletoDueDate` | N/A | Opcional (padrão: 3 dias) |
| `callbackUrl` | Opcional | Opcional |

<Warning>
Para boleto, o cliente (`customerId`) deve ter **nome** e **email** cadastrados. Caso contrário, a transação será rejeitada.
</Warning>

## Valores gerados automaticamente

Alguns campos opcionais são preenchidos automaticamente quando não informados. Isso acontece porque as instituições financeiras exigem esses dados para processar o pagamento, mas a Safefy gera valores válidos para simplificar sua integração.

### PIX

| Campo | O que acontece se não for enviado |
|-------|--------------------------------------|
| Nome do pagador | Preenchido como "Pagador" |
| CPF do pagador | Um CPF válido e aleatório é gerado automaticamente |

<Tip>
Se você enviar um `customerId` com nome e documento cadastrados, esses dados serão utilizados no lugar dos valores automáticos.
</Tip>

### Boleto

| Campo | O que acontece se não for enviado |
|-------|--------------------------------------|
| `boletoDueDate` | O vencimento é definido para **3 dias** após a criação |
| CPF do cliente | Se o cliente não tiver documento cadastrado, um CPF válido e aleatório é gerado |
| Endereço do cliente | Se o cliente não tiver endereço completo, um endereço brasileiro válido é gerado |

<Info>
Os valores gerados automaticamente (CPF e endereço) são tecnicamente válidos e servem apenas para que a instituição financeira aceite a transação. Eles não representam dados reais de nenhuma pessoa. Para garantir que os dados corretos apareçam no boleto, cadastre o cliente com todas as informações antes de criar a transação.
</Info>

## Gerando o QR Code

O campo `pix.copyAndPaste` contém o código EMV (BR Code) do PIX. Para exibir o QR Code visualmente, você precisa gerar a imagem no seu frontend.

### JavaScript (usando qrcode.js)

```html
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<canvas id="qrcode"></canvas>

<script>
  const pixCode = "00020126580014br.gov.bcb.pix0136a1b2c3d4...";
  QRCode.toCanvas(document.getElementById('qrcode'), pixCode);
</script>
```

### React (usando react-qr-code)

```jsx
import QRCode from 'react-qr-code';

function PaymentPage({ transaction }) {
  return (
    <div>
      <QRCode value={transaction.pix.copyAndPaste} size={256} />
      <p>Ou copie o código:</p>
      <code>{transaction.pix.copyAndPaste}</code>
    </div>
  );
}
```

### Next.js (usando next-qrcode)

```jsx
import { useQRCode } from 'next-qrcode';

function PaymentPage({ transaction }) {
  const { Canvas } = useQRCode();
  
  return (
    <Canvas
      text={transaction.pix.copyAndPaste}
      options={{ width: 256, margin: 2 }}
    />
  );
}
```

<Tip>
O código `copyAndPaste` também pode ser copiado pelo usuário e colado diretamente no app do banco para efetuar o pagamento.
</Tip>

## Dados do boleto

Quando `method` for `boleto`, a resposta inclui:

- `boleto.barcode`
- `boleto.digitableLine`
- `boleto.pdfUrl`
- `boleto.dueDate`
