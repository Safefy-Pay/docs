---
title: "Objeto Transação"
description: "Estrutura e atributos do objeto Transação na API Safefy"
---

O objeto Transação representa uma cobrança ou pagamento processado pela Safefy. A API suporta transações via PIX e boleto.

## Estrutura

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "externalId": "pedido_12345",
  "method": "Pix",
  "amount": 15000,
  "fee": 150,
  "netAmount": 14850,
  "currency": "BRL",
  "status": "Pending",
  "description": "Compra na Loja XYZ",
  "environment": "Production",
  "customerId": "550e8400-e29b-41d4-a716-446655440001",
  "customer": {
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "name": "Maria Silva",
    "email": "maria@exemplo.com",
    "document": "12345678901"
  },
  "pix": {
    "txId": "safefy550e8400e29b41d4a716446655440000",
    "qrCode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
    "copyAndPaste": "00020126580014br.gov.bcb.pix...",
    "expiresAt": "2024-01-15T11:00:00Z"
  },
  "expiresAt": "2024-01-15T11:00:00Z",
  "createdAt": "2024-01-15T10:30:00Z",
  "completedAt": null
}
```

## Atributos

<ParamField body="id" type="string" required>
  Identificador único da transação no formato UUID v4. Gerado automaticamente pela API.
</ParamField>

<ParamField body="externalId" type="string">
  Identificador externo da transação no seu sistema. Útil para vincular a transação da Safefy com pedidos ou registros do seu banco de dados.
</ParamField>

<ParamField body="method" type="string" required>
  Método de pagamento utilizado. Valores possíveis:
  - `Pix` - Pagamento instantâneo via PIX
  - `Boleto` - Pagamento via boleto bancário
</ParamField>

<ParamField body="amount" type="integer" required>
  Valor total da transação em centavos. Por exemplo, R$ 150,00 = `15000`.
</ParamField>

<ParamField body="fee" type="integer" required>
  Taxa cobrada pela Safefy em centavos.
</ParamField>

<ParamField body="netAmount" type="integer" required>
  Valor líquido que será creditado na sua conta em centavos. Calculado como `amount - fee`.
</ParamField>

<ParamField body="currency" type="string" required>
  Moeda da transação. Atualmente apenas `BRL` (Real Brasileiro) é suportado.
</ParamField>

<ParamField body="status" type="string" required>
  Status atual da transação. Valores possíveis:
  - `Pending` - Aguardando pagamento
  - `Processing` - Pagamento sendo processado
  - `Completed` - Pagamento confirmado
  - `Failed` - Falha no pagamento
  - `Refunded` - Pagamento estornado
  - `Expired` - Transação expirada (não foi paga no prazo)
  - `Cancelled` - Transação cancelada
</ParamField>

<ParamField body="description" type="string">
  Descrição da transação. Aparece no extrato do pagador.
</ParamField>

<ParamField body="environment" type="string" required>
  Ambiente da transação:
  - `Sandbox` - Ambiente de testes
  - `Production` - Ambiente de produção
</ParamField>

<ParamField body="customerId" type="string">
  ID do cliente associado à transação.
</ParamField>

<ParamField body="customer" type="object">
  Dados resumidos do cliente associado à transação.
  
  <Expandable title="Atributos do cliente">
    <ParamField body="customer.id" type="string">
      ID do cliente.
    </ParamField>
    <ParamField body="customer.name" type="string">
      Nome do cliente.
    </ParamField>
    <ParamField body="customer.email" type="string">
      Email do cliente.
    </ParamField>
    <ParamField body="customer.document" type="string">
      Documento do cliente.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="pix" type="object">
  Dados específicos do pagamento PIX. Presente apenas quando `method` é `Pix`.
  
  <Expandable title="Atributos do PIX">
    <ParamField body="pix.txId" type="string">
      Identificador da transação PIX no Banco Central.
    </ParamField>
    <ParamField body="pix.qrCode" type="string">
      Imagem do QR Code em formato base64 (data URI).
    </ParamField>
    <ParamField body="pix.copyAndPaste" type="string">
      Código PIX Copia e Cola (EMV).
    </ParamField>
    <ParamField body="pix.expiresAt" type="string">
      Data e hora de expiração do QR Code no formato ISO 8601.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="boleto" type="object">
  Dados específicos do boleto. Presente apenas quando `method` é `Boleto`.
  
  <Expandable title="Atributos do boleto">
    <ParamField body="boleto.barcode" type="string">
      Código de barras do boleto.
    </ParamField>
    <ParamField body="boleto.digitableLine" type="string">
      Linha digitável do boleto.
    </ParamField>
    <ParamField body="boleto.pdfUrl" type="string">
      URL do PDF do boleto.
    </ParamField>
    <ParamField body="boleto.dueDate" type="string">
      Data de vencimento do boleto no formato ISO 8601.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="expiresAt" type="string">
  Data e hora de expiração da transação no formato ISO 8601. Após esse horário, a transação muda para status `Expired` se não for paga.
</ParamField>

<ParamField body="createdAt" type="string" required>
  Data e hora de criação da transação no formato ISO 8601.
</ParamField>

<ParamField body="completedAt" type="string">
  Data e hora em que o pagamento foi confirmado no formato ISO 8601. Nulo se ainda não foi pago.
</ParamField>

## Ciclo de Vida da Transação

```
Pending → Processing → Completed
    ↓         ↓
 Expired   Failed
              ↓
          Refunded
```

1. **Pending**: Transação criada, aguardando pagamento
2. **Processing**: Pagamento em processamento
3. **Completed**: Pagamento confirmado com sucesso
4. **Expired**: Não foi paga antes do prazo de expiração
5. **Failed**: Falha no processamento do pagamento
6. **Refunded**: Pagamento foi estornado

## Endpoints

| Método | Endpoint | Descrição |
|--------|----------|-----------|
| `POST` | `/v1/transactions` | [Criar transação](/api-reference/transactions/create) |
| `GET` | `/v1/transactions` | [Listar transações](/api-reference/transactions/list) |
| `GET` | `/v1/transactions/{id}` | [Buscar transação](/api-reference/transactions/get) |
| `POST` | `/v1/transactions/simulate` | [Simular pagamento (Sandbox)](/api-reference/transactions/simulate) |

## Webhooks de transacao

Quando você informa `callbackUrl` na criação, a Safefy envia webhooks de mudança de status. Veja os detalhes em [Webhooks de transação](/api-reference/transactions/webhooks).
